<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Optimization - LearnGit.space</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../../css/styles.css">
    <script src="../../js/progress-tracker.js"></script>
    <script src="../../js/analytics.js"></script>
</head>
<body>
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <a href="../../index.html" class="home-link">‚Üê Back to Mission Control</a>
        
        <header>
            <div class="chapter-header">
                <div class="chapter-number">COMMANDER ‚Ä¢ PHASE 3.4</div>
                <h1><i class="fas fa-tachometer-alt"></i> Performance Optimization</h1>
                <div class="chapter-subtitle">Repository Maintenance, Tuning & Enterprise-Scale Performance</div>
                <div class="difficulty-badge commander">COMMANDER LEVEL</div>
            </div>
            <div class="chapter-nav">
                <a href="../../index.html" class="nav-link"><i class="fas fa-home"></i> Mission Control</a>
                <span class="nav-separator">‚Ä¢</span>
                <a href="security-compliance.html" class="nav-link">Previous: Security & Compliance</a>
                <span class="nav-separator">‚Ä¢</span>
                <span class="current-chapter">Performance Optimization</span>
            </div>
        </header>

        <div class="mission-brief">
            <div class="commander-alert enterprise">
                <i class="fas fa-rocket"></i>
                <div>
                    <strong>Performance Engineering Protocol</strong>
                    <p>You are entering advanced performance optimization training where you'll master repository maintenance, implement enterprise-scale performance tuning, and establish monitoring systems that ensure optimal Git operations across massive development environments.</p>
                </div>
            </div>

            <h2><i class="fas fa-tachometer-alt"></i> Mission Briefing</h2>
            <p>Commander, optimizing Git performance for enterprise environments is like fine-tuning a spacecraft's propulsion systems for maximum efficiency across interstellar distances. Just as space missions require precise fuel management, optimal trajectory calculations, and continuous system monitoring to maintain peak performance, your Git repositories need sophisticated optimization strategies that scale across thousands of developers, terabytes of data, and complex distributed workflows.</p>
            
            <p>You'll master <strong>Enterprise Performance Engineering</strong> and <strong>Repository Optimization</strong> - the advanced techniques that enable organizations to maintain blazing-fast Git operations, minimize resource consumption, and scale seamlessly from small teams to global development armies. From garbage collection tuning to distributed caching strategies, you'll build expertise in maximizing Git performance at any scale.</p>

            <div class="learning-objectives">
                <h3><i class="fas fa-crosshairs"></i> Performance Engineering Objectives</h3>
                <ul>
                    <li>Master repository maintenance and garbage collection optimization</li>
                    <li>Implement performance monitoring and alerting systems</li>
                    <li>Design distributed caching and CDN strategies for global teams</li>
                    <li>Configure advanced Git settings for enterprise-scale operations</li>
                    <li>Establish repository health monitoring and automated maintenance</li>
                    <li>Optimize workflows for massive repositories and high-frequency operations</li>
                </ul>
            </div>

            <div class="chapter-stats">
                <div class="stat-item">
                    <i class="fas fa-clock"></i>
                    <span>12 minutes</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-layer-group"></i>
                    <span>6 Sections</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-flask"></i>
                    <span>2 Performance Labs</span>
                </div>
                <div class="stat-item">
                    <i class="fas fa-trophy"></i>
                    <span>Expert Level</span>
                </div>
            </div>
        </div>

        <!-- Repository Maintenance & Garbage Collection -->
        <section id="repository-maintenance" class="content-section">
            <div class="section-header">
                <h2><i class="fas fa-broom"></i> Repository Maintenance & Garbage Collection</h2>
                <div class="section-badges">
                    <span class="complexity-badge expert">Expert</span>
                    <span class="duration-badge">2 minutes</span>
                </div>
            </div>

            <p>Git repositories accumulate overhead over time through object fragmentation, dangling references, and suboptimal pack files. Enterprise environments require sophisticated maintenance strategies to ensure consistent performance across massive repositories.</p>

            <!-- Git Garbage Collection Deep Dive -->
            <div class="gc-deep-dive">
                <h3>üóëÔ∏è Advanced Garbage Collection</h3>
                
                <div class="gc-process">
                    <h4>Understanding Git GC Process</h4>
                    <div class="gc-stages">
                        <div class="gc-stage">
                            <h5><i class="fas fa-search"></i> Object Discovery</h5>
                            <p>Identify unreachable objects and dangling references</p>
                        </div>
                        <div class="gc-stage">
                            <h5><i class="fas fa-compress"></i> Pack Optimization</h5>
                            <p>Consolidate loose objects and optimize pack files</p>
                        </div>
                        <div class="gc-stage">
                            <h5><i class="fas fa-trash"></i> Cleanup</h5>
                            <p>Remove expired reflog entries and temporary files</p>
                        </div>
                        <div class="gc-stage">
                            <h5><i class="fas fa-chart-line"></i> Verification</h5>
                            <p>Validate repository integrity and performance metrics</p>
                        </div>
                    </div>
                </div>

                <div class="gc-configuration">
                    <h4>Enterprise GC Configuration</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">Optimize Git GC Settings</span>
                            <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                        </div>
                        <pre><code class="language-bash"># Configure automatic garbage collection thresholds
git config gc.auto 6700                    # Trigger GC after 6700 loose objects
git config gc.autoPackLimit 50            # Trigger GC after 50 pack files
git config gc.autoDetach true             # Run GC in background

# Advanced pack configuration
git config pack.window 250                # Delta compression window (default: 10)
git config pack.depth 250                 # Delta compression depth (default: 50)
git config pack.windowMemory 1g           # Memory limit for pack operations
git config pack.deltaCacheSize 2g         # Delta cache size for repacking

# Reflog and pruning settings
git config gc.reflogExpire "90 days"      # Keep reflog entries for 90 days
git config gc.reflogExpireUnreachable "30 days"  # Prune unreachable reflog after 30 days
git config gc.pruneExpire "2 weeks"       # Prune objects after 2 weeks

# Performance-critical settings for large repos
git config core.preloadindex true         # Preload index operations
git config core.untrackedCache true       # Cache untracked file status
git config core.fsmonitor true           # Enable filesystem monitoring
git config feature.manyFiles true        # Optimize for repositories with many files</code></pre>
                    </div>
                </div>
            </div>

            <!-- Automated Maintenance -->
            <div class="automated-maintenance">
                <h3>‚öôÔ∏è Automated Maintenance Strategy</h3>
                
                <div class="maintenance-scripts">
                    <div class="script-section">
                        <h4><i class="fas fa-robot"></i> Comprehensive Maintenance Script</h4>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-title">enterprise-git-maintenance.sh</span>
                                <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                            </div>
                            <pre><code class="language-bash">#!/bin/bash
# Enterprise Git Repository Maintenance Script

set -euo pipefail

REPO_PATH="${1:-$(pwd)}"
LOG_FILE="/var/log/git-maintenance-$(date +%Y%m%d).log"
METRICS_FILE="/var/log/git-metrics-$(date +%Y%m%d-%H%M%S).json"

log() {
    echo "[$(date '+%Y-%m-%d %H:%M:%S')] $1" | tee -a "$LOG_FILE"
}

collect_metrics() {
    local start_time=$(date +%s)
    local repo_size=$(du -sb "$REPO_PATH" | cut -f1)
    local object_count=$(git count-objects -v | grep "count" | cut -d' ' -f2)
    local pack_count=$(git count-objects -v | grep "packs" | cut -d' ' -f2)
    local loose_objects=$(git count-objects -v | grep "count " | cut -d' ' -f2)
    
    cat > "$METRICS_FILE" <<EOF
{
    "timestamp": "$(date -u +%Y-%m-%dT%H:%M:%SZ)",
    "repository": "$REPO_PATH",
    "repo_size_bytes": $repo_size,
    "total_objects": $object_count,
    "pack_files": $pack_count,
    "loose_objects": $loose_objects,
    "maintenance_start": $start_time
}
EOF
}

verify_repository() {
    log "Starting repository verification..."
    if ! git fsck --full --strict 2>&1 | tee -a "$LOG_FILE"; then
        log "ERROR: Repository verification failed"
        exit 1
    fi
    log "Repository verification completed successfully"
}

optimize_repository() {
    log "Starting repository optimization..."
    
    # Aggressive garbage collection
    log "Running aggressive garbage collection..."
    git gc --aggressive --prune=now 2>&1 | tee -a "$LOG_FILE"
    
    # Repack with optimized settings
    log "Repacking with delta compression..."
    git repack -a -d --depth=250 --window=250 2>&1 | tee -a "$LOG_FILE"
    
    # Prune unreachable objects
    log "Pruning unreachable objects..."
    git prune --expire=now 2>&1 | tee -a "$LOG_FILE"
    
    # Clean up reflog
    log "Cleaning reflog..."
    git reflog expire --expire-unreachable=now --all 2>&1 | tee -a "$LOG_FILE"
    
    log "Repository optimization completed"
}

update_metrics() {
    local end_time=$(date +%s)
    local start_time=$(jq -r '.maintenance_start' "$METRICS_FILE")
    local duration=$((end_time - start_time))
    
    # Update metrics with post-maintenance data
    local new_repo_size=$(du -sb "$REPO_PATH" | cut -f1)
    local new_object_count=$(git count-objects -v | grep "count" | cut -d' ' -f2)
    local new_pack_count=$(git count-objects -v | grep "packs" | cut -d' ' -f2)
    
    jq --arg end_time "$end_time" \
       --arg duration "$duration" \
       --arg new_size "$new_repo_size" \
       --arg new_objects "$new_object_count" \
       --arg new_packs "$new_pack_count" \
       '.maintenance_end = ($end_time | tonumber) |
        .duration_seconds = ($duration | tonumber) |
        .post_maintenance_size = ($new_size | tonumber) |
        .post_maintenance_objects = ($new_objects | tonumber) |
        .post_maintenance_packs = ($new_packs | tonumber) |
        .size_reduction = (.repo_size_bytes - .post_maintenance_size) |
        .compression_ratio = (.post_maintenance_size / .repo_size_bytes * 100 | floor)' \
        "$METRICS_FILE" > "${METRICS_FILE}.tmp" && mv "${METRICS_FILE}.tmp" "$METRICS_FILE"
}

main() {
    log "Starting enterprise Git maintenance for $REPO_PATH"
    
    cd "$REPO_PATH"
    collect_metrics
    verify_repository
    optimize_repository
    update_metrics
    
    log "Maintenance completed. Metrics saved to $METRICS_FILE"
    
    # Display summary
    echo "=== Maintenance Summary ==="
    jq -r '"Repository: " + .repository,
           "Duration: " + (.duration_seconds | tostring) + " seconds",
           "Size reduction: " + (.size_reduction | tostring) + " bytes",
           "Compression: " + (.compression_ratio | tostring) + "%"' "$METRICS_FILE"
}

main "$@"</code></pre>
                        </div>
                    </div>
                    
                    <div class="script-section">
                        <h4><i class="fas fa-calendar-alt"></i> Scheduled Maintenance</h4>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-title">Cron Job Configuration</span>
                                <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                            </div>
                            <pre><code class="language-bash"># Add to crontab for automated maintenance
# Run daily maintenance at 2 AM
0 2 * * * /opt/scripts/enterprise-git-maintenance.sh /path/to/repo

# Weekly aggressive maintenance on Sundays at 1 AM
0 1 * * 0 /opt/scripts/enterprise-git-maintenance.sh /path/to/repo --aggressive

# Monthly deep maintenance with full verification
0 0 1 * * /opt/scripts/enterprise-git-maintenance.sh /path/to/repo --deep-clean</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Repository Health Monitoring -->
            <div class="health-monitoring">
                <h3>üè• Repository Health Monitoring</h3>
                
                <div class="monitoring-dashboard">
                    <h4><i class="fas fa-chart-line"></i> Key Health Metrics</h4>
                    
                    <div class="metrics-grid">
                        <div class="metric-card size-metrics">
                            <h5><i class="fas fa-hdd"></i> Size Metrics</h5>
                            <ul>
                                <li><strong>Repository Size:</strong> Total disk usage</li>
                                <li><strong>Object Count:</strong> Number of Git objects</li>
                                <li><strong>Pack Efficiency:</strong> Compression ratio</li>
                                <li><strong>Loose Objects:</strong> Unpacked object count</li>
                            </ul>
                        </div>
                        
                        <div class="metric-card performance-metrics">
                            <h5><i class="fas fa-stopwatch"></i> Performance Metrics</h5>
                            <ul>
                                <li><strong>Clone Time:</strong> Initial repository download</li>
                                <li><strong>Fetch Speed:</strong> Update operation performance</li>
                                <li><strong>Index Performance:</strong> Working directory scanning</li>
                                <li><strong>GC Duration:</strong> Maintenance operation time</li>
                            </ul>
                        </div>
                        
                        <div class="metric-card integrity-metrics">
                            <h5><i class="fas fa-shield-check"></i> Integrity Metrics</h5>
                            <ul>
                                <li><strong>Corruption Detection:</strong> Object integrity checks</li>
                                <li><strong>Reference Validation:</strong> Branch and tag consistency</li>
                                <li><strong>Connectivity:</strong> Object graph completeness</li>
                                <li><strong>Reflog Health:</strong> Reference log integrity</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="monitoring-script">
                    <h4><i class="fas fa-stethoscope"></i> Health Check Script</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span class="code-title">Repository Health Monitor</span>
                            <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                        </div>
                        <pre><code class="language-bash">#!/bin/bash
# Git Repository Health Monitor

check_repo_health() {
    local repo_path="$1"
    local health_score=100
    local issues=()
    
    cd "$repo_path"
    
    # Check repository size
    local repo_size=$(du -sb . | cut -f1)
    if [ $repo_size -gt 1073741824 ]; then  # > 1GB
        health_score=$((health_score - 10))
        issues+=("Large repository size: $(( repo_size / 1073741824 ))GB")
    fi
    
    # Check loose objects
    local loose_objects=$(git count-objects | cut -d' ' -f1)
    if [ $loose_objects -gt 1000 ]; then
        health_score=$((health_score - 15))
        issues+=("Too many loose objects: $loose_objects")
    fi
    
    # Check pack files
    local pack_count=$(git count-objects -v | grep "packs" | cut -d' ' -f2)
    if [ $pack_count -gt 20 ]; then
        health_score=$((health_score - 10))
        issues+=("Too many pack files: $pack_count")
    fi
    
    # Performance test
    local clone_start=$(date +%s.%N)
    git clone --bare . /tmp/health-test-clone &>/dev/null
    local clone_end=$(date +%s.%N)
    local clone_duration=$(echo "$clone_end - $clone_start" | bc)
    rm -rf /tmp/health-test-clone
    
    if (( $(echo "$clone_duration > 30" | bc -l) )); then
        health_score=$((health_score - 20))
        issues+=("Slow clone performance: ${clone_duration}s")
    fi
    
    # Integrity check
    if ! git fsck --quiet; then
        health_score=$((health_score - 50))
        issues+=("Repository corruption detected")
    fi
    
    # Generate health report
    local status="HEALTHY"
    if [ $health_score -lt 80 ]; then
        status="WARNING"
    fi
    if [ $health_score -lt 60 ]; then
        status="CRITICAL"
    fi
    
    echo "Repository Health Report"
    echo "======================="
    echo "Path: $repo_path"
    echo "Health Score: $health_score/100"
    echo "Status: $status"
    echo ""
    
    if [ ${#issues[@]} -gt 0 ]; then
        echo "Issues Found:"
        printf '%s\n' "${issues[@]}"
        echo ""
        echo "Recommendations:"
        echo "- Run 'git gc --aggressive'"
        echo "- Consider repository splitting if >5GB"
        echo "- Implement automated maintenance"
    fi
}

# Run health check
check_repo_health "${1:-$(pwd)}"</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Performance Monitoring & Metrics -->
        <section id="performance-monitoring" class="content-section">
            <div class="section-header">
                <h2><i class="fas fa-chart-line"></i> Performance Monitoring & Metrics</h2>
                <div class="section-badges">
                    <span class="complexity-badge expert">Expert</span>
                    <span class="duration-badge">2 minutes</span>
                </div>
            </div>

            <p>Enterprise Git environments require comprehensive performance monitoring to identify bottlenecks, track trends, and proactively address issues before they impact developer productivity.</p>

            <!-- Performance Metrics Framework -->
            <div class="metrics-framework">
                <h3>üìä Enterprise Performance Metrics</h3>
                
                <div class="metrics-categories">
                    <div class="category-card operations">
                        <h4><i class="fas fa-tasks"></i> Operation Metrics</h4>
                        <div class="metric-list">
                            <div class="metric-item">
                                <span class="metric-name">Clone Time</span>
                                <span class="metric-target">< 2 minutes for repos under 1GB</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-name">Fetch Duration</span>
                                <span class="metric-target">< 30 seconds for typical updates</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-name">Push Time</span>
                                <span class="metric-target">< 10 seconds for normal commits</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-name">Status Check</span>
                                <span class="metric-target">< 1 second for working directory scan</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="category-card resources">
                        <h4><i class="fas fa-server"></i> Resource Metrics</h4>
                        <div class="metric-list">
                            <div class="metric-item">
                                <span class="metric-name">Memory Usage</span>
                                <span class="metric-target">< 2GB peak during operations</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-name">Disk I/O</span>
                                <span class="metric-target">< 100MB/s sustained throughput</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-name">Network Bandwidth</span>
                                <span class="metric-target">Efficient delta compression usage</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-name">CPU Utilization</span>
                                <span class="metric-target">< 80% during normal operations</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Performance Monitoring Tools -->
            <div class="monitoring-tools">
                <h3>üîß Performance Monitoring Implementation</h3>
                
                <div class="tool-implementations">
                    <div class="tool-section">
                        <h4><i class="fas fa-stopwatch"></i> Git Performance Profiler</h4>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-title">Git Operation Profiler</span>
                                <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                            </div>
                            <pre><code class="language-bash">#!/bin/bash
# Git Performance Profiler Script

profile_git_operation() {
    local operation="$1"
    local start_time start_memory peak_memory end_time duration
    
    # Capture initial metrics
    start_time=$(date +%s.%N)
    start_memory=$(ps -o pid,vsz,rss -p $$ | tail -1 | awk '{print $3}')
    
    echo "Profiling: $operation"
    echo "Start time: $(date)"
    
    # Execute the operation with timing
    case "$operation" in
        "clone")
            time git clone --progress "$2" profile-test-clone
            rm -rf profile-test-clone
            ;;
        "fetch")
            time git fetch --all --progress
            ;;
        "status")
            time git status
            ;;
        "log")
            time git log --oneline -1000 > /dev/null
            ;;
        "gc")
            time git gc --aggressive
            ;;
        *)
            echo "Unknown operation: $operation"
            return 1
            ;;
    esac
    
    # Capture end metrics
    end_time=$(date +%s.%N)
    end_memory=$(ps -o pid,vsz,rss -p $$ | tail -1 | awk '{print $3}')
    duration=$(echo "$end_time - $start_time" | bc)
    
    # Generate performance report
    cat <<EOF

=== Performance Report ===
Operation: $operation
Duration: ${duration}s
Memory Usage: $((end_memory - start_memory))KB delta
Repository Size: $(du -sh . | cut -f1)
Object Count: $(git count-objects | cut -d' ' -f1) loose objects
Pack Files: $(git count-objects -v | grep "packs" | cut -d' ' -f2)

EOF
}

# Comprehensive performance test suite
run_performance_suite() {
    echo "Starting Git Performance Test Suite"
    echo "=================================="
    
    # Test various operations
    profile_git_operation "status"
    profile_git_operation "log"
    profile_git_operation "fetch"
    
    # Only run GC if repository needs it
    local loose_objects=$(git count-objects | cut -d' ' -f1)
    if [ "$loose_objects" -gt 100 ]; then
        profile_git_operation "gc"
    fi
    
    echo "Performance suite completed"
}

# Run the test suite
run_performance_suite</code></pre>
                        </div>
                    </div>
                    
                    <div class="tool-section">
                        <h4><i class="fas fa-chart-bar"></i> Metrics Collection System</h4>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-title">Performance Metrics Collector</span>
                                <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                            </div>
                            <pre><code class="language-python">#!/usr/bin/env python3
"""
Enterprise Git Performance Metrics Collector
Collects and reports Git repository performance metrics
"""

import json
import subprocess
import time
import psutil
import os
from datetime import datetime
from pathlib import Path

class GitMetricsCollector:
    def __init__(self, repo_path):
        self.repo_path = Path(repo_path)
        self.metrics = {
            "timestamp": datetime.utcnow().isoformat(),
            "repository": str(repo_path),
            "performance": {},
            "health": {},
            "resources": {}
        }
    
    def collect_repository_stats(self):
        """Collect basic repository statistics"""
        os.chdir(self.repo_path)
        
        # Repository size
        repo_size = sum(f.stat().st_size for f in self.repo_path.rglob('*') if f.is_file())
        
        # Git object counts
        count_objects = subprocess.run(['git', 'count-objects', '-v'], 
                                     capture_output=True, text=True)
        objects_info = {}
        for line in count_objects.stdout.split('\n'):
            if ' ' in line:
                key, value = line.split(' ', 1)
                objects_info[key] = value
        
        self.metrics["health"] = {
            "repository_size_bytes": repo_size,
            "loose_objects": int(objects_info.get("count", "0")),
            "pack_files": int(objects_info.get("packs", "0")),
            "size_pack": int(objects_info.get("size-pack", "0")),
            "prune_packable": int(objects_info.get("prune-packable", "0"))
        }
    
    def benchmark_operations(self):
        """Benchmark common Git operations"""
        operations = {
            "status": ["git", "status", "--porcelain"],
            "log_recent": ["git", "log", "--oneline", "-100"],
            "branch_list": ["git", "branch", "-a"],
            "remote_list": ["git", "remote", "-v"]
        }
        
        performance_results = {}
        
        for op_name, cmd in operations.items():
            start_time = time.time()
            start_memory = psutil.Process().memory_info().rss
            
            try:
                result = subprocess.run(cmd, capture_output=True, text=True, timeout=30)
                success = result.returncode == 0
            except subprocess.TimeoutExpired:
                success = False
                
            end_time = time.time()
            end_memory = psutil.Process().memory_info().rss
            
            performance_results[op_name] = {
                "duration_seconds": end_time - start_time,
                "memory_delta_bytes": end_memory - start_memory,
                "success": success
            }
        
        self.metrics["performance"] = performance_results
    
    def collect_system_resources(self):
        """Collect system resource information"""
        self.metrics["resources"] = {
            "cpu_percent": psutil.cpu_percent(interval=1),
            "memory_percent": psutil.virtual_memory().percent,
            "disk_usage_percent": psutil.disk_usage(str(self.repo_path)).percent,
            "available_memory_gb": psutil.virtual_memory().available / (1024**3),
            "disk_free_gb": psutil.disk_usage(str(self.repo_path)).free / (1024**3)
        }
    
    def generate_health_score(self):
        """Generate overall health score"""
        score = 100
        
        # Deduct points for performance issues
        if self.metrics["performance"]["status"]["duration_seconds"] > 1.0:
            score -= 10
        
        # Deduct points for repository size issues
        repo_size_gb = self.metrics["health"]["repository_size_bytes"] / (1024**3)
        if repo_size_gb > 1:
            score -= min(20, repo_size_gb * 5)  # Up to 20 points for large repos
        
        # Deduct points for too many loose objects
        loose_objects = self.metrics["health"]["loose_objects"]
        if loose_objects > 1000:
            score -= min(30, loose_objects / 100)  # Up to 30 points
        
        # Deduct points for resource constraints
        if self.metrics["resources"]["memory_percent"] > 80:
            score -= 15
        
        if self.metrics["resources"]["disk_usage_percent"] > 90:
            score -= 20
        
        self.metrics["health_score"] = max(0, int(score))
        
        # Determine status
        if score >= 80:
            self.metrics["status"] = "HEALTHY"
        elif score >= 60:
            self.metrics["status"] = "WARNING"
        else:
            self.metrics["status"] = "CRITICAL"
    
    def collect_all_metrics(self):
        """Collect all metrics and generate report"""
        print("Collecting repository statistics...")
        self.collect_repository_stats()
        
        print("Benchmarking Git operations...")
        self.benchmark_operations()
        
        print("Collecting system resources...")
        self.collect_system_resources()
        
        print("Generating health score...")
        self.generate_health_score()
        
        return self.metrics
    
    def save_metrics(self, output_file):
        """Save metrics to JSON file"""
        with open(output_file, 'w') as f:
            json.dump(self.metrics, f, indent=2)
        print(f"Metrics saved to {output_file}")

if __name__ == "__main__":
    import sys
    
    repo_path = sys.argv[1] if len(sys.argv) > 1 else "."
    output_file = sys.argv[2] if len(sys.argv) > 2 else f"git-metrics-{int(time.time())}.json"
    
    collector = GitMetricsCollector(repo_path)
    metrics = collector.collect_all_metrics()
    collector.save_metrics(output_file)
    
    # Print summary
    print(f"\n=== Performance Summary ===")
    print(f"Repository: {metrics['repository']}")
    print(f"Health Score: {metrics['health_score']}/100")
    print(f"Status: {metrics['status']}")
    print(f"Size: {metrics['health']['repository_size_bytes'] / (1024**2):.1f} MB")
    print(f"Git Status: {metrics['performance']['status']['duration_seconds']:.2f}s")
</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Alerting and Dashboards -->
            <div class="alerting-dashboards">
                <h3>üö® Performance Alerting</h3>
                
                <div class="alert-configurations">
                    <div class="alert-rules">
                        <h4><i class="fas fa-exclamation-triangle"></i> Alert Thresholds</h4>
                        
                        <div class="threshold-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Metric</th>
                                        <th>Warning</th>
                                        <th>Critical</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Clone Time</td>
                                        <td>&gt; 2 minutes</td>
                                        <td>&gt; 5 minutes</td>
                                        <td>Run GC, check network</td>
                                    </tr>
                                    <tr>
                                        <td>Repository Size</td>
                                        <td>&gt; 1 GB</td>
                                        <td>&gt; 5 GB</td>
                                        <td>Consider LFS, split repo</td>
                                    </tr>
                                    <tr>
                                        <td>Loose Objects</td>
                                        <td>&gt; 1,000</td>
                                        <td>&gt; 10,000</td>
                                        <td>Schedule maintenance</td>
                                    </tr>
                                    <tr>
                                        <td>Pack Files</td>
                                        <td>&gt; 20</td>
                                        <td>&gt; 50</td>
                                        <td>Repack repository</td>
                                    </tr>
                                    <tr>
                                        <td>Memory Usage</td>
                                        <td>&gt; 80%</td>
                                        <td>&gt; 95%</td>
                                        <td>Optimize operations</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="notification-system">
                        <h4><i class="fas fa-bell"></i> Notification Integration</h4>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-title">Performance Alert Script</span>
                                <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                            </div>
                            <pre><code class="language-bash">#!/bin/bash
# Performance Alert System

send_alert() {
    local severity="$1"
    local metric="$2"
    local value="$3"
    local threshold="$4"
    local repo="$5"
    
    local color=""
    case "$severity" in
        "WARNING") color="#FFA500" ;;
        "CRITICAL") color="#FF0000" ;;
    esac
    
    # Slack notification
    curl -X POST "$SLACK_WEBHOOK" \
         -H 'Content-type: application/json' \
         --data "{
           \"attachments\": [{
             \"color\": \"$color\",
             \"title\": \"Git Performance Alert - $severity\",
             \"fields\": [
               {\"title\": \"Repository\", \"value\": \"$repo\", \"short\": true},
               {\"title\": \"Metric\", \"value\": \"$metric\", \"short\": true},
               {\"title\": \"Current Value\", \"value\": \"$value\", \"short\": true},
               {\"title\": \"Threshold\", \"value\": \"$threshold\", \"short\": true}
             ],
             \"footer\": \"Git Performance Monitor\",
             \"ts\": $(date +%s)
           }]
         }"
    
    # Email notification
    echo "Git Performance Alert: $severity
    
Repository: $repo
Metric: $metric
Current Value: $value
Threshold: $threshold
    
Time: $(date)
    
Please investigate and take appropriate action." | \
    mail -s "Git Performance Alert - $severity" admin@company.com
}

# Check performance metrics and send alerts
check_performance_alerts() {
    local metrics_file="$1"
    
    if [ ! -f "$metrics_file" ]; then
        echo "Metrics file not found: $metrics_file"
        return 1
    fi
    
    local repo=$(jq -r '.repository' "$metrics_file")
    local health_score=$(jq -r '.health_score' "$metrics_file")
    local repo_size=$(jq -r '.health.repository_size_bytes' "$metrics_file")
    local loose_objects=$(jq -r '.health.loose_objects' "$metrics_file")
    local status_duration=$(jq -r '.performance.status.duration_seconds' "$metrics_file")
    
    # Check health score
    if [ "$health_score" -lt 60 ]; then
        send_alert "CRITICAL" "Health Score" "$health_score/100" "60" "$repo"
    elif [ "$health_score" -lt 80 ]; then
        send_alert "WARNING" "Health Score" "$health_score/100" "80" "$repo"
    fi
    
    # Check repository size (5GB = 5368709120 bytes)
    if [ "$repo_size" -gt 5368709120 ]; then
        send_alert "CRITICAL" "Repository Size" "$((repo_size / 1073741824))GB" "5GB" "$repo"
    elif [ "$repo_size" -gt 1073741824 ]; then
        send_alert "WARNING" "Repository Size" "$((repo_size / 1073741824))GB" "1GB" "$repo"
    fi
    
    # Check loose objects
    if [ "$loose_objects" -gt 10000 ]; then
        send_alert "CRITICAL" "Loose Objects" "$loose_objects" "10000" "$repo"
    elif [ "$loose_objects" -gt 1000 ]; then
        send_alert "WARNING" "Loose Objects" "$loose_objects" "1000" "$repo"
    fi
    
    # Check status performance
    if (( $(echo "$status_duration > 5.0" | bc -l) )); then
        send_alert "CRITICAL" "Status Duration" "${status_duration}s" "5s" "$repo"
    elif (( $(echo "$status_duration > 1.0" | bc -l) )); then
        send_alert "WARNING" "Status Duration" "${status_duration}s" "1s" "$repo"
    fi
}

check_performance_alerts "$@"</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Advanced Git Configuration Tuning -->
        <section id="git-configuration" class="content-section">
            <div class="section-header">
                <h2><i class="fas fa-cogs"></i> Advanced Git Configuration Tuning</h2>
                <div class="section-badges">
                    <span class="complexity-badge expert">Expert</span>
                    <span class="duration-badge">3 minutes</span>
                </div>
            </div>

            <p>Enterprise Git performance depends heavily on optimal configuration. Advanced tuning can dramatically improve operation speed, reduce resource consumption, and enhance developer experience across diverse network and hardware environments.</p>

            <!-- Core Performance Configuration -->
            <div class="core-performance-config">
                <h3>‚öôÔ∏è Core Performance Settings</h3>
                
                <div class="config-categories">
                    <div class="config-category network">
                        <h4><i class="fas fa-network-wired"></i> Network Optimization</h4>
                        <div class="config-content">
                            <p>Optimize Git for various network conditions and remote operations</p>
                            
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-title">Network Performance Configuration</span>
                                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                                </div>
                                <pre><code class="language-bash"># HTTP/HTTPS Transfer Optimization
git config --global http.postBuffer 524288000      # 500MB buffer for large pushes
git config --global http.maxRequestBuffer 100M    # Max request buffer size
git config --global http.lowSpeedLimit 1000       # Min speed: 1KB/s
git config --global http.lowSpeedTime 300         # Timeout after 5 minutes

# Connection Management
git config --global http.version HTTP/2           # Use HTTP/2 for better performance
git config --global http.sslVerify true          # SSL verification (security)
git config --global http.followRedirects initial  # Follow redirects on initial request

# Proxy and Authentication Caching
git config --global credential.helper cache       # Cache credentials for 15 minutes
git config --global credential.helper 'cache --timeout=3600'  # 1 hour cache

# Transfer Optimization
git config --global transfer.unpackLimit 1       # Unpack threshold for objects
git config --global pack.packSizeLimit 2g        # Max pack file size: 2GB
git config --global pack.windowMemory 1g         # Memory for delta compression
git config --global pack.deltaCacheLimit 1000m   # Delta cache limit</code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <div class="config-category filesystem">
                        <h4><i class="fas fa-hdd"></i> Filesystem Optimization</h4>
                        <div class="config-content">
                            <p>Optimize Git for different filesystems and storage configurations</p>
                            
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-title">Filesystem Performance Settings</span>
                                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                                </div>
                                <pre><code class="language-bash"># Core Filesystem Settings
git config --global core.preloadindex true       # Preload index operations
git config --global core.fscache true           # Enable filesystem cache (Windows)
git config --global core.untrackedCache true    # Cache untracked file status
git config --global core.fsmonitor true         # Enable filesystem monitoring

# Index and Working Directory Optimization
git config --global index.version 4             # Use index version 4 (faster)
git config --global core.checkStat minimal      # Minimal stat checking
git config --global core.trustctime false       # Don't trust ctime (network filesystems)

# Large Repository Settings
git config --global feature.manyFiles true      # Optimize for many files
git config --global index.recordOffsetTable true # Faster index operations
git config --global index.recordEndOfIndexEntries true

# Parallel Processing
git config --global checkout.workers 0          # Auto-detect CPU cores for checkout
git config --global submodule.fetchJobs 4       # Parallel submodule operations
git config --global pack.threads 0              # Auto-detect cores for packing</code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <div class="config-category memory">
                        <h4><i class="fas fa-memory"></i> Memory Management</h4>
                        <div class="config-content">
                            <p>Configure Git memory usage for optimal performance on various hardware</p>
                            
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-title">Memory Optimization Settings</span>
                                    <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                                </div>
                                <pre><code class="language-bash"># Pack File Memory Configuration
git config --global pack.windowMemory 1g        # Memory for pack window
git config --global pack.packSizeLimit 2g       # Maximum pack file size
git config --global pack.deltaCacheSize 2g      # Delta compression cache
git config --global pack.deltaCacheLimit 1000m  # Per-object delta cache limit

# Garbage Collection Memory
git config --global gc.bigPackThreshold 2g      # Threshold for big packs
git config --global gc.auto 6700               # Auto GC after 6700 loose objects
git config --global gc.autoPackLimit 50        # Auto GC after 50 pack files

# Merge and Rebase Memory
git config --global merge.renameLimit 7000     # Rename detection limit
git config --global diff.renameLimit 7000      # Diff rename limit
git config --global merge.ours.driver true    # Optimize merge strategy

# Buffer Sizes
git config --global core.deltaBaseCacheLimit 96m  # Delta base cache
git config --global core.bigFileThreshold 512m    # Large file threshold</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Performance Profiles -->
            <div class="performance-profiles">
                <h3>üéØ Environment-Specific Performance Profiles</h3>
                
                <div class="profile-configurations">
                    <div class="profile-card developer-workstation">
                        <h4><i class="fas fa-laptop-code"></i> Developer Workstation Profile</h4>
                        <div class="profile-content">
                            <p>Optimized for individual developer machines with local repositories</p>
                            
                            <div class="code-example">
                                <h5>Configuration Script</h5>
                                <div class="code-block">
                                    <div class="code-header">
                                        <span class="code-title">setup-developer-profile.sh</span>
                                        <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                                    </div>
                                    <pre><code class="language-bash">#!/bin/bash
# Developer Workstation Git Performance Profile

echo "Configuring Git for developer workstation..."

# Core performance settings
git config --global core.preloadindex true
git config --global core.untrackedCache true
git config --global core.fsmonitor true
git config --global index.version 4

# Moderate resource usage
git config --global pack.windowMemory 512m
git config --global pack.deltaCacheSize 512m
git config --global gc.auto 1000
git config --global pack.threads 2

# Developer-friendly settings
git config --global status.showUntrackedFiles normal
git config --global diff.algorithm patience
git config --global merge.tool vimdiff
git config --global rerere.enabled true

# UI enhancements
git config --global color.ui auto
git config --global color.branch auto
git config --global color.diff auto
git config --global color.status auto

echo "Developer profile configured successfully!"</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="profile-card ci-server">
                        <h4><i class="fas fa-server"></i> CI/CD Server Profile</h4>
                        <div class="profile-content">
                            <p>Optimized for automated builds and deployments with minimal resource usage</p>
                            
                            <div class="code-example">
                                <h5>Configuration Script</h5>
                                <div class="code-block">
                                    <div class="code-header">
                                        <span class="code-title">setup-cicd-profile.sh</span>
                                        <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                                    </div>
                                    <pre><code class="language-bash">#!/bin/bash
# CI/CD Server Git Performance Profile

echo "Configuring Git for CI/CD server..."

# Minimal resource usage
git config --global pack.windowMemory 256m
git config --global pack.deltaCacheSize 256m
git config --global gc.auto 0  # Disable auto GC
git config --global pack.threads 1

# Fast operations for CI
git config --global core.preloadindex false
git config --global core.untrackedCache false
git config --global status.showUntrackedFiles no

# Shallow clone optimizations
git config --global clone.defaultRemoteName origin
git config --global fetch.prune true
git config --global fetch.pruneTags true

# Security and stability
git config --global http.sslVerify true
git config --global transfer.fsckobjects true
git config --global fetch.fsckobjects false  # Skip for speed

# Disable interactive features
git config --global core.editor true
git config --global merge.tool false

echo "CI/CD profile configured successfully!"</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="profile-card high-performance">
                        <h4><i class="fas fa-rocket"></i> High-Performance Server Profile</h4>
                        <div class="profile-content">
                            <p>Maximum performance for servers with abundant resources</p>
                            
                            <div class="code-example">
                                <h5>Configuration Script</h5>
                                <div class="code-block">
                                    <div class="code-header">
                                        <span class="code-title">setup-high-performance-profile.sh</span>
                                        <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                                    </div>
                                    <pre><code class="language-bash">#!/bin/bash
# High-Performance Server Git Profile

echo "Configuring Git for high-performance server..."

# Maximum resource utilization
git config --global pack.windowMemory 2g
git config --global pack.deltaCacheSize 4g
git config --global pack.deltaCacheLimit 2000m
git config --global pack.threads 0  # Auto-detect all cores

# Aggressive performance settings
git config --global core.preloadindex true
git config --global core.untrackedCache true
git config --global core.fsmonitor true
git config --global feature.manyFiles true

# Large repository optimization
git config --global pack.packSizeLimit 4g
git config --global gc.bigPackThreshold 4g
git config --global gc.auto 10000
git config --global gc.autoPackLimit 100

# Network optimization for server
git config --global http.postBuffer 1048576000  # 1GB
git config --global http.maxRequestBuffer 1000M
git config --global transfer.unpackLimit 1

# Parallel operations
git config --global checkout.workers 0
git config --global submodule.fetchJobs 8
git config --global grep.threads 0

echo "High-performance profile configured successfully!"</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Configuration Management -->
            <div class="config-management">
                <h3>üìã Configuration Management</h3>
                
                <div class="management-tools">
                    <div class="tool-section">
                        <h4><i class="fas fa-clipboard-check"></i> Configuration Audit Tool</h4>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-title">Git Configuration Auditor</span>
                                <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                            </div>
                            <pre><code class="language-bash">#!/bin/bash
# Git Configuration Performance Audit

audit_git_config() {
    echo "=== Git Configuration Performance Audit ==="
    echo "Date: $(date)"
    echo "User: $(whoami)"
    echo "Git Version: $(git --version)"
    echo ""
    
    # Core performance settings
    echo "Core Performance Settings:"
    echo "========================="
    git config --get core.preloadindex || echo "core.preloadindex: NOT SET (recommend: true)"
    git config --get core.untrackedCache || echo "core.untrackedCache: NOT SET (recommend: true)"
    git config --get core.fsmonitor || echo "core.fsmonitor: NOT SET (recommend: true)"
    git config --get index.version || echo "index.version: NOT SET (recommend: 4)"
    echo ""
    
    # Memory settings
    echo "Memory Configuration:"
    echo "===================="
    git config --get pack.windowMemory || echo "pack.windowMemory: NOT SET (recommend: 1g)"
    git config --get pack.deltaCacheSize || echo "pack.deltaCacheSize: NOT SET (recommend: 2g)"
    git config --get gc.bigPackThreshold || echo "gc.bigPackThreshold: NOT SET (recommend: 2g)"
    echo ""
    
    # Network settings
    echo "Network Configuration:"
    echo "====================="
    git config --get http.postBuffer || echo "http.postBuffer: NOT SET (recommend: 524288000)"
    git config --get http.version || echo "http.version: NOT SET (recommend: HTTP/2)"
    echo ""
    
    # Performance recommendations
    echo "Performance Recommendations:"
    echo "=========================="
    
    local loose_objects=$(git count-objects 2>/dev/null | cut -d' ' -f1 || echo "0")
    if [ "$loose_objects" -gt 1000 ]; then
        echo "‚ö†Ô∏è  WARNING: $loose_objects loose objects detected. Run 'git gc'"
    fi
    
    local pack_count=$(git count-objects -v 2>/dev/null | grep "packs" | cut -d' ' -f2 || echo "0")
    if [ "$pack_count" -gt 20 ]; then
        echo "‚ö†Ô∏è  WARNING: $pack_count pack files detected. Run 'git gc --aggressive'"
    fi
    
    # Check repository size
    local repo_size=$(du -sb . 2>/dev/null | cut -f1 || echo "0")
    if [ "$repo_size" -gt 1073741824 ]; then  # > 1GB
        echo "‚ÑπÔ∏è  INFO: Large repository detected ($((repo_size / 1073741824))GB). Consider LFS for binary assets"
    fi
}

# Performance benchmark
benchmark_git_operations() {
    echo ""
    echo "=== Performance Benchmark ==="
    echo "============================"
    
    # Status performance
    echo -n "git status: "
    time git status --porcelain > /dev/null
    
    # Log performance
    echo -n "git log (100 commits): "
    time git log --oneline -100 > /dev/null 2>&1
    
    # Branch listing
    echo -n "git branch -a: "
    time git branch -a > /dev/null 2>&1
}

# Run audit
audit_git_config
benchmark_git_operations</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Distributed Caching & CDN Strategies -->
        <section id="distributed-caching" class="content-section">
            <div class="section-header">
                <h2><i class="fas fa-globe"></i> Distributed Caching & CDN Strategies</h2>
                <div class="section-badges">
                    <span class="complexity-badge expert">Expert</span>
                    <span class="duration-badge">3 minutes</span>
                </div>
            </div>

            <p>Global development teams require sophisticated caching strategies to minimize latency, reduce bandwidth costs, and ensure consistent performance across geographic regions. Enterprise Git infrastructure must leverage distributed caching, CDN integration, and intelligent routing.</p>

            <!-- Git Caching Architecture -->
            <div class="caching-architecture">
                <h3>üèóÔ∏è Enterprise Git Caching Architecture</h3>
                
                <div class="architecture-diagram">
                    <div class="cache-layers">
                        <div class="cache-layer edge">
                            <h4><i class="fas fa-edge"></i> Edge Cache Layer</h4>
                            <div class="layer-components">
                                <div class="component">
                                    <h5>CDN Nodes</h5>
                                    <p>Global edge locations for static Git objects</p>
                                    <ul>
                                        <li>Pack file caching</li>
                                        <li>Object blob storage</li>
                                        <li>Reference caching</li>
                                    </ul>
                                </div>
                                <div class="component">
                                    <h5>Regional Proxies</h5>
                                    <p>Regional Git protocol proxies</p>
                                    <ul>
                                        <li>Smart HTTP caching</li>
                                        <li>Authentication passthrough</li>
                                        <li>Bandwidth optimization</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="cache-layer regional">
                            <h4><i class="fas fa-server"></i> Regional Cache Layer</h4>
                            <div class="layer-components">
                                <div class="component">
                                    <h5>Git Mirrors</h5>
                                    <p>Full repository mirrors in each region</p>
                                    <ul>
                                        <li>Complete repository copies</li>
                                        <li>Local clone sources</li>
                                        <li>Automated synchronization</li>
                                    </ul>
                                </div>
                                <div class="component">
                                    <h5>Object Stores</h5>
                                    <p>Distributed object caching</p>
                                    <ul>
                                        <li>LFS object caching</li>
                                        <li>Pack file distribution</li>
                                        <li>Intelligent pre-loading</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CDN Configuration -->
            <div class="cdn-configuration">
                <h3>üåê CDN Integration for Git</h3>
                
                <div class="cdn-implementations">
                    <div class="cdn-provider cloudfront">
                        <h4><i class="fab fa-aws"></i> Amazon CloudFront Configuration</h4>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-title">CloudFront Distribution for Git</span>
                                <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                            </div>
                            <pre><code class="language-json">{
  "DistributionConfig": {
    "CallerReference": "git-cdn-distribution",
    "Comment": "Git repository CDN for global performance",
    "DefaultRootObject": "",
    "Origins": {
      "Quantity": 1,
      "Items": [
        {
          "Id": "git-origin",
          "DomainName": "git.company.com",
          "CustomOriginConfig": {
            "HTTPPort": 443,
            "HTTPSPort": 443,
            "OriginProtocolPolicy": "https-only",
            "OriginSslProtocols": {
              "Quantity": 1,
              "Items": ["TLSv1.2"]
            }
          }
        }
      ]
    },
    "DefaultCacheBehavior": {
      "TargetOriginId": "git-origin",
      "ViewerProtocolPolicy": "redirect-to-https",
      "CachePolicyId": "custom-git-cache-policy",
      "Compress": true,
      "AllowedMethods": {
        "Quantity": 7,
        "Items": ["GET", "HEAD", "OPTIONS", "PUT", "POST", "PATCH", "DELETE"],
        "CachedMethods": {
          "Quantity": 2,
          "Items": ["GET", "HEAD"]
        }
      }
    },
    "CacheBehaviors": {
      "Quantity": 3,
      "Items": [
        {
          "PathPattern": "*/objects/pack/*",
          "TargetOriginId": "git-origin",
          "ViewerProtocolPolicy": "https-only",
          "CachePolicyId": "long-term-cache-policy",
          "TTL": {
            "DefaultTTL": 86400,
            "MaxTTL": 31536000
          }
        },
        {
          "PathPattern": "*/info/refs*",
          "TargetOriginId": "git-origin",
          "ViewerProtocolPolicy": "https-only",
          "CachePolicyId": "short-term-cache-policy",
          "TTL": {
            "DefaultTTL": 300,
            "MaxTTL": 3600
          }
        },
        {
          "PathPattern": "*git-upload-pack*",
          "TargetOriginId": "git-origin",
          "ViewerProtocolPolicy": "https-only",
          "CachePolicyId": "no-cache-policy",
          "TTL": {
            "DefaultTTL": 0,
            "MaxTTL": 0
          }
        }
      ]
    },
    "PriceClass": "PriceClass_All",
    "Enabled": true,
    "HttpVersion": "http2"
  }
}</code></pre>
                        </div>
                    </div>
                    
                    <div class="cdn-provider cloudflare">
                        <h4><i class="fab fa-cloudflare"></i> Cloudflare Configuration</h4>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-title">Cloudflare Page Rules for Git</span>
                                <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                            </div>
                            <pre><code class="language-bash"># Cloudflare Page Rules for Git Repository Optimization

# Rule 1: Cache pack files aggressively
# URL Pattern: git.company.com/*/objects/pack/*
# Settings:
#   - Cache Level: Cache Everything
#   - Edge Cache TTL: 1 month
#   - Browser Cache TTL: 1 week

# Rule 2: Short-term cache for references
# URL Pattern: git.company.com/*/info/refs*
# Settings:
#   - Cache Level: Cache Everything
#   - Edge Cache TTL: 5 minutes
#   - Browser Cache TTL: 1 minute

# Rule 3: Bypass cache for interactive operations
# URL Pattern: git.company.com/*git-upload-pack*
# Settings:
#   - Cache Level: Bypass

# Rule 4: Compress all Git traffic
# URL Pattern: git.company.com/*
# Settings:
#   - Compression: On
#   - HTTP/2: On
#   - Minify: Off (binary content)</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Smart Caching Strategies -->
            <div class="smart-caching">
                <h3>üß† Intelligent Caching Strategies</h3>
                
                <div class="caching-strategies">
                    <div class="strategy-card predictive">
                        <h4><i class="fas fa-crystal-ball"></i> Predictive Pre-loading</h4>
                        <div class="strategy-content">
                            <p>Analyze access patterns to pre-load frequently accessed objects</p>
                            
                            <div class="code-example">
                                <h5>Predictive Cache Script</h5>
                                <div class="code-block">
                                    <div class="code-header">
                                        <span class="code-title">predictive-git-cache.py</span>
                                        <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                                    </div>
                                    <pre><code class="language-python">#!/usr/bin/env python3
"""
Predictive Git Object Caching System
Analyzes access patterns and pre-loads frequently accessed objects
"""

import json
import subprocess
import requests
from datetime import datetime, timedelta
from collections import Counter
import redis

class GitCachePredictor:
    def __init__(self, redis_host='localhost', redis_port=6379):
        self.redis_client = redis.Redis(host=redis_host, port=redis_port, decode_responses=True)
        self.access_log_key = "git:access_log"
        self.cache_stats_key = "git:cache_stats"
        
    def log_access(self, repo, object_id, access_type):
        """Log Git object access for pattern analysis"""
        timestamp = datetime.utcnow().isoformat()
        access_record = {
            "timestamp": timestamp,
            "repository": repo,
            "object_id": object_id,
            "access_type": access_type,
            "hour": datetime.utcnow().hour,
            "day_of_week": datetime.utcnow().weekday()
        }
        
        # Store in Redis with 30-day expiration
        self.redis_client.lpush(self.access_log_key, json.dumps(access_record))
        self.redis_client.expire(self.access_log_key, 30 * 24 * 3600)
    
    def analyze_patterns(self):
        """Analyze access patterns to identify frequently accessed objects"""
        # Get recent access logs
        logs = self.redis_client.lrange(self.access_log_key, 0, 10000)
        access_data = [json.loads(log) for log in logs]
        
        # Analyze by repository
        repo_patterns = {}
        for access in access_data:
            repo = access["repository"]
            if repo not in repo_patterns:
                repo_patterns[repo] = {
                    "objects": Counter(),
                    "hourly": Counter(),
                    "daily": Counter()
                }
            
            repo_patterns[repo]["objects"][access["object_id"]] += 1
            repo_patterns[repo]["hourly"][access["hour"]] += 1
            repo_patterns[repo]["daily"][access["day_of_week"]] += 1
        
        return repo_patterns
    
    def predict_next_accesses(self, repo):
        """Predict which objects are likely to be accessed next"""
        patterns = self.analyze_patterns()
        if repo not in patterns:
            return []
        
        # Get most frequently accessed objects
        frequent_objects = patterns[repo]["objects"].most_common(20)
        
        # Current time context
        current_hour = datetime.utcnow().hour
        current_day = datetime.utcnow().weekday()
        
        # Weight predictions based on time patterns
        predictions = []
        for obj_id, frequency in frequent_objects:
            # Calculate prediction score
            base_score = frequency
            time_modifier = 1.0
            
            # Boost score if this time period has high activity
            if patterns[repo]["hourly"][current_hour] > 0:
                time_modifier *= 1.2
            if patterns[repo]["daily"][current_day] > 0:
                time_modifier *= 1.1
            
            predictions.append({
                "object_id": obj_id,
                "score": base_score * time_modifier,
                "frequency": frequency
            })
        
        return sorted(predictions, key=lambda x: x["score"], reverse=True)
    
    def pre_load_objects(self, repo, predictions, cache_endpoint):
        """Pre-load predicted objects into cache"""
        for prediction in predictions[:10]:  # Top 10 predictions
            object_id = prediction["object_id"]
            
            try:
                # Request object from Git server to populate cache
                response = requests.get(f"{cache_endpoint}/{repo}/objects/{object_id}")
                if response.status_code == 200:
                    print(f"Pre-loaded object {object_id} for {repo}")
                    
                    # Update cache statistics
                    cache_key = f"{self.cache_stats_key}:{repo}:{object_id}"
                    self.redis_client.hset(cache_key, mapping={
                        "pre_loaded": datetime.utcnow().isoformat(),
                        "prediction_score": prediction["score"]
                    })
                    self.redis_client.expire(cache_key, 24 * 3600)
                    
            except Exception as e:
                print(f"Failed to pre-load {object_id}: {e}")

# Usage example
predictor = GitCachePredictor()

# Simulate access logging
predictor.log_access("myproject", "abc123def456", "clone")
predictor.log_access("myproject", "def456ghi789", "fetch")

# Analyze and predict
predictions = predictor.predict_next_accesses("myproject")
predictor.pre_load_objects("myproject", predictions, "https://cache.git.company.com")</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="strategy-card adaptive">
                        <h4><i class="fas fa-chart-area"></i> Adaptive Cache TTL</h4>
                        <div class="strategy-content">
                            <p>Dynamically adjust cache TTL based on object type and access patterns</p>
                            
                            <div class="ttl-strategy">
                                <h5>Cache TTL Strategy</h5>
                                <ul>
                                    <li><strong>Pack Files:</strong> 30 days (rarely change)</li>
                                    <li><strong>References:</strong> 5 minutes (frequent updates)</li>
                                    <li><strong>Objects:</strong> 24 hours (moderate stability)</li>
                                    <li><strong>Index:</strong> 1 minute (highly dynamic)</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="strategy-card regional">
                        <h4><i class="fas fa-map-marked-alt"></i> Geographic Optimization</h4>
                        <div class="strategy-content">
                            <p>Route requests to optimal cache locations based on user geography</p>
                            
                            <div class="routing-table">
                                <h5>Cache Routing Table</h5>
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Region</th>
                                            <th>Primary Cache</th>
                                            <th>Fallback</th>
                                            <th>Latency Target</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>North America</td>
                                            <td>US-East-1</td>
                                            <td>US-West-2</td>
                                            <td>&lt; 50ms</td>
                                        </tr>
                                        <tr>
                                            <td>Europe</td>
                                            <td>EU-Central-1</td>
                                            <td>EU-West-1</td>
                                            <td>&lt; 30ms</td>
                                        </tr>
                                        <tr>
                                            <td>Asia Pacific</td>
                                            <td>AP-Southeast-1</td>
                                            <td>AP-Northeast-1</td>
                                            <td>&lt; 80ms</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cache Performance Monitoring -->
            <div class="cache-monitoring">
                <h3>üìà Cache Performance Monitoring</h3>
                
                <div class="monitoring-dashboard">
                    <h4><i class="fas fa-tachometer-alt"></i> Key Cache Metrics</h4>
                    
                    <div class="cache-metrics">
                        <div class="metric-group hit-rates">
                            <h5><i class="fas fa-bullseye"></i> Hit Rate Metrics</h5>
                            <ul>
                                <li><strong>Overall Hit Rate:</strong> > 85% target</li>
                                <li><strong>Pack File Hit Rate:</strong> > 95% target</li>
                                <li><strong>Object Hit Rate:</strong> > 80% target</li>
                                <li><strong>Reference Hit Rate:</strong> > 70% target</li>
                            </ul>
                        </div>
                        
                        <div class="metric-group performance">
                            <h5><i class="fas fa-stopwatch"></i> Performance Metrics</h5>
                            <ul>
                                <li><strong>Cache Response Time:</strong> < 10ms average</li>
                                <li><strong>Origin Fallback Time:</strong> < 500ms</li>
                                <li><strong>Bandwidth Savings:</strong> > 60% reduction</li>
                                <li><strong>Error Rate:</strong> < 0.1% of requests</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Workflow Optimization -->
        <section id="workflow-optimization" class="content-section">
            <div class="section-header">
                <h2><i class="fas fa-project-diagram"></i> Workflow Optimization</h2>
                <div class="section-badges">
                    <span class="complexity-badge expert">Expert</span>
                    <span class="duration-badge">4 minutes</span>
                </div>
            </div>

            <p>Enterprise development workflows must be optimized for scale, efficiency, and developer productivity. Advanced workflow optimization involves strategic branching models, automated processes, and intelligent resource allocation to support thousands of concurrent developers.</p>

            <!-- Optimized Branching Strategies -->
            <div class="branching-strategies">
                <h3>üå≥ High-Performance Branching Models</h3>
                
                <div class="branching-models">
                    <div class="model-card trunk-based">
                        <h4><i class="fas fa-code-branch"></i> Trunk-Based Development</h4>
                        <div class="model-content">
                            <p>Optimized for continuous integration with minimal merge conflicts</p>
                            
                            <div class="model-benefits">
                                <h5>Performance Benefits</h5>
                                <ul>
                                    <li>Minimal branch divergence reduces merge complexity</li>
                                    <li>Faster CI/CD pipeline execution</li>
                                    <li>Reduced repository size and clutter</li>
                                    <li>Simplified conflict resolution</li>
                                </ul>
                            </div>
                            
                            <div class="implementation-guide">
                                <h5>Implementation Strategy</h5>
                                <div class="code-block">
                                    <div class="code-header">
                                        <span class="code-title">Trunk-Based Git Workflow</span>
                                        <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                                    </div>
                                    <pre><code class="language-bash"># Trunk-based development workflow optimization

# Developer workflow
git checkout main
git pull --rebase origin main  # Always rebase to maintain linear history

# Short-lived feature branches (< 24 hours)
git checkout -b feature/quick-fix
# ... make changes ...
git add .
git commit -m "feat: implement quick feature"

# Rebase before merge to maintain clean history
git checkout main
git pull --rebase origin main
git checkout feature/quick-fix
git rebase main

# Fast-forward merge to trunk
git checkout main
git merge --ff-only feature/quick-fix
git push origin main
git branch -d feature/quick-fix

# Configure Git for trunk-based workflow
git config --global pull.rebase true           # Always rebase on pull
git config --global branch.autosetupmerge always
git config --global branch.autosetuprebase always</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="model-card release-flow">
                        <h4><i class="fas fa-shipping-fast"></i> Optimized Release Flow</h4>
                        <div class="model-content">
                            <p>Balanced approach for teams requiring stable releases</p>
                            
                            <div class="release-automation">
                                <h5>Automated Release Pipeline</h5>
                                <div class="code-block">
                                    <div class="code-header">
                                        <span class="code-title">Release Automation Script</span>
                                        <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                                    </div>
                                    <pre><code class="language-bash">#!/bin/bash
# Optimized Release Flow Automation

set -euo pipefail

RELEASE_VERSION=${1:-""}
CURRENT_BRANCH=$(git branch --show-current)

if [ -z "$RELEASE_VERSION" ]; then
    echo "Usage: $0 <version>"
    echo "Example: $0 v2.1.0"
    exit 1
fi

echo "Starting optimized release process for $RELEASE_VERSION"

# Ensure we're on develop branch
if [ "$CURRENT_BRANCH" != "develop" ]; then
    echo "Switching to develop branch..."
    git checkout develop
    git pull origin develop
fi

# Create release branch with optimized settings
echo "Creating release branch..."
git checkout -b "release/$RELEASE_VERSION"

# Update version files
echo "Updating version information..."
echo "$RELEASE_VERSION" > VERSION
git add VERSION

# Create release commit
git commit -m "chore: prepare release $RELEASE_VERSION

- Bump version to $RELEASE_VERSION
- Prepare release notes
- Update documentation"

# Run automated tests and quality checks
echo "Running pre-release validation..."
if command -v npm &> /dev/null; then
    npm test || { echo "Tests failed"; exit 1; }
fi

# Merge to main with optimized strategy
echo "Merging to main..."
git checkout main
git pull origin main
git merge --no-ff "release/$RELEASE_VERSION" -m "release: $RELEASE_VERSION"

# Create signed release tag
echo "Creating release tag..."
git tag -s "$RELEASE_VERSION" -m "Release $RELEASE_VERSION

$(git log --oneline $(git describe --tags --abbrev=0)..HEAD)"

# Push with atomic operation
echo "Publishing release..."
git push origin main "$RELEASE_VERSION"

# Merge back to develop
echo "Merging back to develop..."
git checkout develop
git merge --no-ff main -m "merge: integrate release $RELEASE_VERSION back to develop"
git push origin develop

# Cleanup
git branch -d "release/$RELEASE_VERSION"

echo "Release $RELEASE_VERSION completed successfully!"</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Performance-Optimized CI/CD -->
            <div class="cicd-optimization">
                <h3>üöÄ High-Performance CI/CD Integration</h3>
                
                <div class="cicd-strategies">
                    <div class="strategy-section parallel">
                        <h4><i class="fas fa-parallel"></i> Parallel Processing Optimization</h4>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-title">Parallel CI Pipeline Configuration</span>
                                <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                            </div>
                            <pre><code class="language-yaml"># GitHub Actions: High-Performance CI Pipeline
name: Optimized CI Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

# Optimize job concurrency
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  # Fast preliminary checks
  quick-checks:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 1  # Shallow clone for speed
      
      - name: Lint and format check
        run: |
          # Run linting in parallel
          npm run lint &
          npm run format:check &
          wait

  # Parallel testing strategy
  test-matrix:
    needs: quick-checks
    runs-on: ${{ matrix.os }}
    timeout-minutes: 15
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest, macos-latest]
        node-version: [16, 18, 20]
      fail-fast: false  # Continue other jobs if one fails
      max-parallel: 6   # Limit concurrent jobs
    
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0  # Full history for proper testing
      
      - uses: actions/setup-node@v3
        with:
          node-version: ${{ matrix.node-version }}
          cache: 'npm'
      
      - name: Install dependencies
        run: npm ci --prefer-offline --no-audit

      - name: Run tests
        run: npm test
        env:
          CI: true

  # Parallel build and deployment
  build-and-deploy:
    needs: test-matrix
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
      - uses: actions/checkout@v3
      
      - name: Build application
        run: |
          # Parallel build processes
          npm run build:client &
          npm run build:server &
          npm run build:docs &
          wait
      
      - name: Deploy with blue-green strategy
        run: |
          # Optimized deployment script
          ./scripts/deploy-optimized.sh</code></pre>
                        </div>
                    </div>
                    
                    <div class="strategy-section caching">
                        <h4><i class="fas fa-database"></i> Intelligent Build Caching</h4>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-title">Advanced Build Caching Strategy</span>
                                <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                            </div>
                            <pre><code class="language-yaml"># Advanced caching for build optimization
- name: Cache dependencies and build artifacts
  uses: actions/cache@v3
  with:
    path: |
      ~/.npm
      ~/.cache
      node_modules
      dist/
      .next/cache
    key: ${{ runner.os }}-build-${{ hashFiles('**/package-lock.json', '**/yarn.lock') }}-${{ github.sha }}
    restore-keys: |
      ${{ runner.os }}-build-${{ hashFiles('**/package-lock.json', '**/yarn.lock') }}-
      ${{ runner.os }}-build-

# Docker layer caching for containerized builds
- name: Setup Docker Buildx
  uses: docker/setup-buildx-action@v2

- name: Build with cache
  uses: docker/build-push-action@v4
  with:
    context: .
    cache-from: type=gha
    cache-to: type=gha,mode=max
    tags: myapp:${{ github.sha }}</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Developer Productivity Tools -->
            <div class="productivity-tools">
                <h3>‚ö° Developer Productivity Optimization</h3>
                
                <div class="productivity-suite">
                    <div class="tool-section aliases">
                        <h4><i class="fas fa-terminal"></i> High-Performance Git Aliases</h4>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-title">Performance-Optimized Git Aliases</span>
                                <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                            </div>
                            <pre><code class="language-bash"># High-performance Git aliases for enterprise workflows

# Fast status and logging
git config --global alias.s 'status --porcelain'
git config --global alias.st 'status'
git config --global alias.l "log --oneline -10"
git config --global alias.lg "log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit"

# Optimized branching
git config --global alias.co 'checkout'
git config --global alias.cob 'checkout -b'
git config --global alias.com 'checkout main'
git config --global alias.cod 'checkout develop'

# Fast commits and pushes
git config --global alias.a 'add .'
git config --global alias.c 'commit -m'
git config --global alias.ac '!git add . && git commit -m'
git config --global alias.acp '!f() { git add . && git commit -m "$1" && git push; }; f'

# Intelligent pulling and pushing
git config --global alias.pf 'push --force-with-lease'  # Safer force push
git config --global alias.pl 'pull --rebase'           # Always rebase
git config --global alias.pu 'push -u origin HEAD'     # Push and set upstream

# Repository maintenance
git config --global alias.cleanup '!git branch --merged main | grep -v "main\|develop" | xargs -n 1 git branch -d'
git config --global alias.optimize '!git gc --aggressive && git prune && git fsck'

# Advanced searching and debugging
git config --global alias.find 'log --all --full-history -- '
git config --global alias.grep 'grep --break --heading --line-number'
git config --global alias.amend 'commit --amend --no-edit'
git config --global alias.undo 'reset --soft HEAD~1'

# Performance shortcuts
git config --global alias.stat 'diff --stat'
git config --global alias.cached 'diff --cached'
git config --global alias.unstage 'reset HEAD --'</code></pre>
                        </div>
                    </div>
                    
                    <div class="tool-section hooks">
                        <h4><i class="fas fa-anchor"></i> Performance-Focused Git Hooks</h4>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-title">Optimized Pre-Commit Hook</span>
                                <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                            </div>
                            <pre><code class="language-bash">#!/bin/bash
# Optimized pre-commit hook for enterprise performance

set -euo pipefail

# Performance tracking
START_TIME=$(date +%s.%N)

# Skip hook in CI environment for speed
if [ "${CI:-false}" = "true" ]; then
    echo "Skipping pre-commit hook in CI environment"
    exit 0
fi

# Fast file change detection
CHANGED_FILES=$(git diff --cached --name-only --diff-filter=ACM)
if [ -z "$CHANGED_FILES" ]; then
    echo "No changes to validate"
    exit 0
fi

echo "Validating $(echo "$CHANGED_FILES" | wc -l) changed files..."

# Parallel validation processes
validate_javascript() {
    local js_files=$(echo "$CHANGED_FILES" | grep -E '\.(js|jsx|ts|tsx)$' || true)
    if [ -n "$js_files" ]; then
        echo "Linting JavaScript files..."
        echo "$js_files" | xargs -P 4 -I {} npx eslint {} || return 1
    fi
}

validate_python() {
    local py_files=$(echo "$CHANGED_FILES" | grep -E '\.py$' || true)
    if [ -n "$py_files" ]; then
        echo "Linting Python files..."
        echo "$py_files" | xargs -P 4 -I {} python -m flake8 {} || return 1
    fi
}

validate_formatting() {
    local fmt_files=$(echo "$CHANGED_FILES" | grep -E '\.(js|jsx|ts|tsx|py|json|md)$' || true)
    if [ -n "$fmt_files" ]; then
        echo "Checking formatting..."
        echo "$fmt_files" | xargs -P 4 -I {} prettier --check {} || return 1
    fi
}

# Run validations in parallel
validate_javascript &
JS_PID=$!

validate_python &
PY_PID=$!

validate_formatting &
FMT_PID=$!

# Wait for all processes and check results
FAILED=0
wait $JS_PID || FAILED=1
wait $PY_PID || FAILED=1
wait $FMT_PID || FAILED=1

# Performance reporting
END_TIME=$(date +%s.%N)
DURATION=$(echo "$END_TIME - $START_TIME" | bc)

echo "Pre-commit validation completed in ${DURATION}s"

if [ $FAILED -eq 1 ]; then
    echo "‚ùå Pre-commit validation failed"
    echo "Run 'npm run fix' or 'git commit --no-verify' to bypass"
    exit 1
fi

echo "‚úÖ Pre-commit validation passed"
exit 0</code></pre>
                        </div>
                    </div>
                    
                    <div class="tool-section automation">
                        <h4><i class="fas fa-robot"></i> Workflow Automation Tools</h4>
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-title">Developer Workflow Automator</span>
                                <button class="copy-btn" onclick="copyCode(this)">üìã Copy</button>
                            </div>
                            <pre><code class="language-bash">#!/bin/bash
# Enterprise Developer Workflow Automator

# Smart branch switching with auto-stash
smart_switch() {
    local target_branch="$1"
    local current_branch=$(git branch --show-current)
    
    if [ "$current_branch" = "$target_branch" ]; then
        echo "Already on $target_branch"
        return 0
    fi
    
    # Auto-stash if there are changes
    if ! git diff-index --quiet HEAD --; then
        echo "Auto-stashing changes..."
        git stash push -m "Auto-stash before switching to $target_branch"
        STASHED=true
    fi
    
    # Switch branch
    git checkout "$target_branch"
    git pull --rebase origin "$target_branch"
    
    # Auto-unstash if we stashed
    if [ "${STASHED:-false}" = "true" ]; then
        echo "Auto-applying stashed changes..."
        git stash pop
    fi
}

# Intelligent feature branch creation
create_feature() {
    local feature_name="$1"
    local base_branch="${2:-develop}"
    
    # Ensure base branch is up to date
    git checkout "$base_branch"
    git pull --rebase origin "$base_branch"
    
    # Create feature branch
    local branch_name="feature/$feature_name"
    git checkout -b "$branch_name"
    
    echo "Created feature branch: $branch_name"
    echo "Base: $base_branch"
}

# Optimized feature completion
complete_feature() {
    local current_branch=$(git branch --show-current)
    
    if [[ ! "$current_branch" == feature/* ]]; then
        echo "Not on a feature branch"
        return 1
    fi
    
    # Ensure all changes are committed
    if ! git diff-index --quiet HEAD --; then
        echo "Uncommitted changes detected. Please commit or stash."
        return 1
    fi
    
    # Rebase on latest main/develop
    local base_branch=$(git show-branch | grep '\*' | grep -v "$(git rev-parse --abbrev-ref HEAD)" | head -n1 | sed 's/.*\[\([^~]*\).*\].*/\1/')
    git fetch origin
    git rebase "origin/$base_branch"
    
    # Push feature branch
    git push -u origin "$current_branch"
    
    echo "Feature branch ready for pull request"
    echo "Branch: $current_branch"
    echo "Base: $base_branch"
}

# Command routing
case "${1:-}" in
    "switch"|"sw")
        smart_switch "$2"
        ;;
    "feature"|"f")
        create_feature "$2" "$3"
        ;;
    "complete"|"done")
        complete_feature
        ;;
    *)
        echo "Usage: $0 {switch|feature|complete} [args...]"
        echo ""
        echo "Commands:"
        echo "  switch <branch>     - Smart branch switching with auto-stash"
        echo "  feature <name>      - Create new feature branch"
        echo "  complete           - Complete feature and prepare for PR"
        ;;
esac</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="mission-complete">
            <div class="completion-message">
                <h2><i class="fas fa-trophy"></i> Mission Status: COMPLETE</h2>
                <p>Outstanding achievement, Commander! You have successfully mastered enterprise-level Git performance optimization. Your expertise in repository maintenance, distributed caching, advanced configuration tuning, and workflow optimization will enable you to maintain peak Git performance across massive development environments.</p>
                
                <p>You've completed <strong>Phase 3: Enterprise-Level Project Management</strong> - the most advanced tier of Git training. Your skills now encompass the full spectrum of enterprise Git operations, from large repository management to security compliance and performance optimization.</p>

                <div class="achievement-summary">
                    <h3><i class="fas fa-medal"></i> Commander Achievement Summary</h3>
                    <div class="phase-completion">
                        <div class="completed-phase">
                            <h4>‚úÖ Phase 3.1: Large Repository Management</h4>
                            <p>Monorepos, submodules, subtrees, migration strategies</p>
                        </div>
                        <div class="completed-phase">
                            <h4>‚úÖ Phase 3.2: Git LFS Mastery</h4>
                            <p>Binary asset management, enterprise deployment</p>
                        </div>
                        <div class="completed-phase">
                            <h4>‚úÖ Phase 3.3: Security & Compliance</h4>
                            <p>GPG signing, audit trails, regulatory compliance</p>
                        </div>
                        <div class="completed-phase">
                            <h4>‚úÖ Phase 3.4: Performance Optimization</h4>
                            <p>Repository maintenance, caching, workflow optimization</p>
                        </div>
                    </div>
                </div>
                
                <div class="mission-nav-buttons">
                    <a href="security-compliance.html" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Previous Mission</a>
                    <a href="../../index.html" class="btn btn-primary"><i class="fas fa-home"></i> Return to Mission Control</a>
                </div>
            </div>
        </div>

        <footer>
            <p>Commander Operations Training ‚Ä¢ Phase 3.4 of Enterprise-Level Project Management ‚Ä¢ Part 1 of 2</p>
        </footer>
    </div>

    <script>
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            star.style.animationDuration = (2 + Math.random() * 2) + 's';
            starsContainer.appendChild(star);
        }

        function continueToNextPart() {
            // This would normally navigate to part 2
            alert('Part 2 will be created next!');
        }
    </script>
</body>
</html>