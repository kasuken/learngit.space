<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Git Reset and Recovery - Three-Tree Architecture</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Master Git's three-tree architecture. Learn advanced reset, reflog recovery, and repository state management.">
    <meta name="keywords" content="git reset advanced, Git recovery, reflog, three-tree architecture, repository state, Git internals">
    <meta name="author" content="Emanuele Bartolesi">
    <link rel="canonical" href="https://www.learngit.space/chapters/advanced/advanced-reset-recovery.html">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Advanced Git Reset and Recovery - Three-Tree Architecture">
    <meta property="og:description" content="Master Git's three-tree architecture. Learn advanced reset, reflog recovery, and repository state management.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://www.learngit.space/advanced/advanced-reset-recovery.html">
    <meta property="og:site_name" content="LearnGit.space">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Advanced Git Reset and Recovery - Three-Tree Architecture">
    <meta name="twitter:description" content="Master Git's three-tree architecture. Learn advanced reset, reflog recovery, and repository state management.">
    <meta name="twitter:creator" content="@kasuken">
    
    <!-- Additional SEO -->
    <meta name="robots" content="index, follow">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../../css/styles.css">
    <script src="../../js/progress-tracker.js"></script>
    <script src="../../js/analytics.js"></script>

    <!-- Structured Data for Educational Content -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LearningResource",
      "name": "Advanced Git Reset and Recovery - Three-Tree Architecture",
      "description": "Three-Tree Architecture",
      "url": "https://www.learngit.space/chapters/advanced/advanced-reset-recovery.html",
      "learningResourceType": "Tutorial",
      "educationalLevel": "Advanced",
      "audience": {
        "@type": "EducationalAudience",
        "educationalRole": "student"
      },
      "inLanguage": "en",
      "isAccessibleForFree": true,
      "timeRequired": "PT10M",
      "author": {
        "@type": "Person",
        "name": "Emanuele Bartolesi"
      },
      "provider": {
        "@type": "Organization",
        "name": "LearnGit.space",
        "url": "https://www.learngit.space/"
      },
      "about": {
        "@type": "Thing",
        "name": "Git Version Control"
      }
    }
    </script>
</head>
<body data-mission="advanced-workflows" data-phase="3">
    <div class="stars" id="stars"></div>
    
    <div class="container">
        <a href="../../index.html" class="home-link">← Back to Mission Control</a>
        
        <header>
            <h1><i class="fas fa-history"></i> Advanced Reset & Recovery</h1>
            <div class="reading-time-badge"><i class="fas fa-book-open"></i> 10 min read</div>
            <p class="subtitle">Three-Tree Architecture</p>
        </header>

        <div class="mission-brief">
            <div class="commander-alert">
                <i class="fas fa-exclamation-triangle"></i>
                <div>
                    <strong>Critical Mission Recovery Protocol</strong>
                    <p>You are entering advanced disaster recovery training. These operations can save or destroy entire mission histories. Precision and understanding are essential for safe execution.</p>
                </div>
            </div>

            <h2><i class="fas fa-life-ring"></i> Mission Briefing</h2>
            <p>Commander, space missions don't always go according to plan. Equipment fails, crew members make errors, and sometimes catastrophic events require immediate intervention to save the mission. In the development universe, Git provides powerful recovery tools, but like emergency spacecraft procedures, they must be used with complete understanding and extreme caution.</p>
            
            <p>You'll master Git's <strong>three-tree architecture</strong> - the fundamental system that powers all reset, checkout, and revert operations. Understanding these internal mechanisms is what separates elite space commanders from cadets who panic during emergencies.</p>

            <div class="learning-objectives">
                <h3><i class="fas fa-crosshairs"></i> Mission Objectives</h3>
                <ul>
                    <li>Master Git's three-tree architecture (Working Directory, Staging Area, Repository)</li>
                    <li>Execute safe and dangerous reset operations with precision</li>
                    <li>Implement advanced checkout strategies for timeline navigation</li>
                    <li>Deploy strategic revert operations for production environments</li>
                    <li>Establish emergency recovery protocols for catastrophic scenarios</li>
                </ul>
            </div>
        </div>

        <div class="content-section">
            <h2><i class="fas fa-cubes"></i> Git's Three-Tree Architecture</h2>
            
            <p>Git uses three "trees" to manage your code:</p>

            <div class="trees-visualization">
                <h3>1. Working Directory</h3>
                <p>Your actual files - what you see and edit.</p>

                <h3>2. Staging Area (Index)</h3>
                <p>Changes prepared for next commit.</p>

                <h3>3. Repository (HEAD)</h3>
                <p>Committed snapshots - the permanent history.</p>
            </div>

            <h3>How Commands Affect Trees</h3>
            <pre><code># git add: Working → Staging
# git commit: Staging → Repository
# git reset --soft: Move HEAD (Repository only)
# git reset --mixed: Move HEAD + reset Staging (default)
# git reset --hard: Move HEAD + reset Staging + Working (DESTRUCTIVE!)</code></pre>
        </div>

        <div class="content-section">
            <h2><i class="fas fa-undo"></i> Reset Operations</h2>
            
            <h3>Soft Reset (SAFE)</h3>
            <p>Undo commits but keep all changes staged:</p>
            <pre><code># Undo last commit, keep changes staged
git reset --soft HEAD~1

# Use case: Fix commit messages, combine commits</code></pre>

            <h3>Mixed Reset (Default)</h3>
            <p>Undo commits and unstage changes:</p>
            <pre><code># Undo commits, unstage changes, keep files
git reset HEAD~2
git reset --mixed HEAD~2  # Same as above

# Unstage specific file
git reset HEAD filename

# Use case: Split commits, reorganize staging area</code></pre>

            <h3>Hard Reset (DESTRUCTIVE - USE WITH CAUTION!)</h3>
            <p>⚠️ Destroys all uncommitted changes!</p>
            <pre><code># ALWAYS create backup first!
git branch emergency-backup

# Nuclear option - destroys uncommitted work
git reset --hard HEAD~2
git reset --hard origin/main  # Match remote exactly

# Use case: Discard failed experiments, recover from corruption</code></pre>
        </div>

        <div class="content-section">
            <h2><i class="fas fa-map-marked-alt"></i> Checkout Operations</h2>
            
            <pre><code># Switch branches
git checkout feature-branch
git checkout -b new-branch  # Create and switch

# Time travel (detached HEAD)
git checkout abc123f
git checkout HEAD~5

# Restore specific files
git checkout -- filename
git checkout HEAD~3 -- filename

# Checkout vs Reset:
# - Checkout: Switch branches, restore files (doesn't rewrite history)
# - Reset: Undo commits, move branch pointer (rewrites history)</code></pre>
        </div>

        <div class="content-section">
            <h2><i class="fas fa-undo-alt"></i> Revert Operations</h2>
            
            <p>Safely undo changes in shared repositories by creating new commits:</p>

            <pre><code># Revert single commit
git revert abc123f

# Revert multiple commits
git revert HEAD~3..HEAD

# Revert merge commit
git revert -m 1 merge-commit-hash

# Why use revert?
# ✅ Safe for shared/public repositories
# ✅ Preserves history
# ✅ Can be reverted itself if needed
# ✅ Production-ready approach</code></pre>
        </div>
                        <div class="scenario-content">
                            <p><strong>Situation:</strong> Feature branch was merged but needs to be completely undone</p>
                            <pre><code># Revert a range of commits
git revert HEAD~3..HEAD

# Revert merge commit (specify parent)
git revert -m 1 abc123f

# Revert multiple specific commits
git revert abc123f def456a ghi789b</code></pre>
                        </div>
                    </div>

                    <div class="scenario-card">
                        <h4><i class="fas fa-code-branch"></i> Merge Commit Revert</h4>
                        <div class="scenario-content">
                            <p><strong>Situation:</strong> Entire feature merge needs to be undone</p>
                            <pre><code># Find merge commit
git log --oneline --graph

# Revert merge (choose main parent with -m 1)
git revert -m 1 merge-commit-hash

# Alternative: revert to before merge
git log --first-parent
git revert range-of-commits</code></pre>
                        </div>
                    </div>
                </div>

                <div class="revert-advantages">
                    <h3><i class="fas fa-star"></i> Why Revert for Production Environments</h3>
                    <div class="advantages-grid">
                        <div class="advantage-item">
                            <i class="fas fa-history"></i>
                            <h4>Preserves History</h4>
                            <p>Complete audit trail of what was changed and why it was reverted</p>
                        </div>
                        <div class="advantage-item">
                            <i class="fas fa-users"></i>
                            <h4>Team Safe</h4>
                            <p>Safe for shared repositories - doesn't rewrite history that others depend on</p>
                        </div>
                        <div class="advantage-item">
                            <i class="fas fa-redo"></i>
                            <h4>Reversible</h4>
                            <p>Can revert the revert if you change your mind later</p>
                        </div>
                        <div class="advantage-item">
                            <i class="fas fa-shield-alt"></i>
                            <h4>Production Ready</h4>
                            <p>Standard practice for fixing production issues without disrupting team workflow</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="content-section">
            <h2><i class="fas fa-rocket"></i> Quick Practice</h2>
            
            <p>Practice soft reset to fix bad commit messages:</p>

            <pre><code>mkdir practice && cd practice && git init

# Create messy commits
echo "file1" > file1.txt && git add . && git commit -m "stuff"
echo "file2" > file2.txt && git add . && git commit -m "more stuff"
echo "file3" > file3.txt && git add . && git commit -m "things"

# Fix with soft reset
git reset --soft HEAD~3
git commit -m "Add initial files with proper structure"

# Verify
git log --oneline</code></pre>
        </div>

        <div class="content-section">
            <h2><i class="fas fa-first-aid"></i> Emergency Quick Reference</h2>
            
            <div class="ref-grid">
                <div class="ref-card">
                    <h4>Undo Last Commit (Keep Changes)</h4>
                    <code>git reset --soft HEAD~1</code>
                </div>
                <div class="ref-card">
                    <h4>Unstage Files</h4>
                    <code>git reset HEAD file</code>
                </div>
                <div class="ref-card">
                    <h4>Restore Deleted File</h4>
                    <code>git checkout HEAD -- file</code>
                </div>
                <div class="ref-card">
                    <h4>Nuclear Reset (DESTRUCTIVE!)</h4>
                    <code>git reset --hard HEAD~1</code>
                </div>
                <div class="ref-card">
                    <h4>Safe Production Fix</h4>
                    <code>git revert commit-hash</code>
                </div>
                <div class="ref-card">
                    <h4>Create Backup</h4>
                    <code>git branch backup</code>
                </div>
            </div>
        </div>
        <div class="mission-complete">
            <h2><i class="fas fa-trophy"></i> Mission Complete!</h2>
            <p>You've mastered Git's three-tree architecture and recovery operations.</p>
            
            <h3><i class="fas fa-key"></i> Skills Acquired</h3>
            <ul>
                <li>✅ Git's three-tree architecture</li>
                <li>✅ Soft, mixed, and hard reset operations</li>
                <li>✅ Checkout strategies for file recovery</li>
                <li>✅ Production-safe revert operations</li>
                <li>✅ Emergency response protocols</li>
            </ul>

            <div class="next-mission">
                <p>Continue to <strong>Advanced History Analysis</strong> to master Git log forensics.</p>
                <div class="mission-nav-buttons">
                    <a href="advanced-branching-strategies.html" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Previous</a>
                    <a href="../../index.html" class="btn btn-secondary"><i class="fas fa-home"></i> Mission Control</a>
                    <a href="advanced-history-analysis.html" class="btn btn-primary">Next: History Analysis →</a>
                </div>
            </div>
        </div>

        <footer>
            <p>Commander Operations Training • Phase 1.3 of Advanced Git Workflows</p>
        </footer>
    </div>

    <script>
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 100; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            star.style.animationDuration = (2 + Math.random() * 2) + 's';
            starsContainer.appendChild(star);
        }
    </script>
</body>
</html>